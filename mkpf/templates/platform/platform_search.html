{% extends 'new_template.html' %}

{% block style %}
{% endblock %}


{% block content %}

<!-- Contact Form Section Begin -->
    <section class="contact-form-section spad">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="cf-content">
                        <div class="cc-title">
                            <h4>신발모델 생성폼</h4>
                        </div>
                        <form method="post" class="cc-form" id='createform' enctype="multipart/form-data">
                            {{ form.csrf_token }}
                            {% include "form_errors.html" %}
                            <div class="group-input">
                                <select name="brand" id="brand">
                                    {% for item in form.brand %}
                                    <option value={{item.data}}>{{item.label}}</option>
                                    {% endfor %}
                                </select>
                                <input  type="text" name="code" placeholder="Shoes code" id="code" value="{{ form.code.data or ''}}" style="width:20%; margin-left:1%;">
                                <input type="text" name="name" placeholder="Shoes name" id="name" value="{{ form.name.data or ''}}">
                                <input type="text" name="price" placeholder="Retail Price (&#8361;)" id="price" value="{{ form.price.data or ''}}">
                                <input type="date" name="releasedate" id="releasedate" value="{{ form.releasedate.data or '2020-10-12'}}">
                                <input type="text" name="keyword" placeholder="keyword" id="keyword" value="{{ form.keyword.data or ''}}">
                                <input type="text" name="colorway" id="colorway" placeholder="colorway" value="{{ form.colorway.data or ''}}">
                            </div>
                            <div class="form-group row">
                                <div class="col-sm-12" id="rad">
                                    <input type="radio" value="img_path" id="img_path" name="rdimg" checked="checked">
                                    <label for="img_path" class="text-muted">경로로 업로드</label>
                                    <input type="radio" value="img_local" id="img_local" name="rdimg">
                                    <label for="img_local" class="text-muted">로컬로 업로드</label>
                                </div>
                            </div>

                            <div class="form-group row" id="select_path">
                                <div class="col-sm-12">
                                    <input class="form-control" type="text" name="uri" id="uri" value="{{ form.uri.data or ''}}" onchange="loadFile(event)">
                                </div>
                            </div>
                            <span class="form-group row" id="select_local" style="display:none;" >
                                <div class="custom-file col-sm-5" id="select_hidden" style="margin-left:4%;">
                                    <input class="custom-file-input" type="file" accept="image/*" name="img" id="img" onchange="loadFile(event)">
                                    <label class="custom-file-label" for="img">선택하기</label>
                                </div>
                            </span>
                            <div class="form-group">
                                <img id="output" style="max-height:50%; max-width:50%;"/>
                            </div>

                            <button onclick="$(this).SearchBtn();" type="submit" class="site-btn">Submit</button>

                        </form>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Contact Form Section End -->
{% endblock %}

{% block script%}
<script type="text/javascript">
$.fn.SearchBtn = function() {
        if (confirm('입력 하신내용으로 모델생성및 크롤링을 시작하시겠습니까?')){
        $('#createform').submit();
                $("#preloder").show();
               $("#loaders").show();
        } else {
            alert("취소하셨습니다.");
        }
};

$(document).ready(function(){
  $("#img_path").click(function(){

    $('#select_local').hide();
    $("#img_path").show();
    $("#select_path").show()

  });
  $("#img_local").click(function(){

    $("#select_path").hide();
    $('#select_local').show();
    $("#img_local").show();
  });
});

var loadFile = function(event) {
    var output = document.getElementById('output');
    output.src = URL.createObjectURL(event.target.files[0]);
    output.onload = function() {
      URL.revokeObjectURL(output.src) // free memory
    }
  };

// Add the following code if you want the name of the file appear on select

$(".custom-file-input").on("change", function() {
  var fileName = $(this).val().split("\\").pop();
  $(this).siblings(".custom-file-label").addClass("selected").html(fileName);
});
</script>
{% endblock %}